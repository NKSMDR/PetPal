<!-- ğŸ’¬ Global Chat Modal (AJAX-ready template) -->
<div class="modal fade" id="chatModal" tabindex="-1" aria-labelledby="chatModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content chat-modal">
      <div class="modal-header border-0 pb-2">
        <div class="d-flex align-items-center gap-3">
          <div class="chat-avatar">
            <i class="fas fa-comments"></i>
          </div>
          <div>
            <h5 class="modal-title mb-0 fw-bold" id="chatModalLabel" style="color: #1e293b;">ğŸ’¬ PetBuddy Chat</h5>
            <small class="text-muted d-flex align-items-center gap-1" id="chatModalSubtitle">
              <span class="online-status-dot"></span>
              Talk with pet lovers in real-time
            </small>
          </div>
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="font-size: 0.9rem;"></button>
      </div>

      <div class="modal-body pt-3">
        <div class="chat-window shadow-sm">
          <!-- Sidebar (conversations list) -->
          <div class="chat-sidebar d-none d-md-flex flex-column">
            <div class="chat-sidebar-header">
              <span class="fw-bold d-flex align-items-center justify-content-between">
                <span class="d-flex align-items-center gap-2">
                  <i class="fas fa-paw" style="color: #3b82f6;"></i>
                  <span style="color: #1e293b;">Your Chats</span>
                </span>
                <span id="chat-count-badge" class="badge bg-primary" style="font-size: 0.7rem; display: none;">0</span>
              </span>
            </div>
            <div class="chat-sidebar-body position-relative" id="chat-conversation-list">
              <!-- Conversations will be loaded here -->
              <div class="chat-conversation active">
                <div class="conversation-title">Select a conversation</div>
                <div class="conversation-meta">Your chats will appear here</div>
              </div>
              <!-- Scroll indicator for more conversations -->
              <div class="scroll-indicator scroll-indicator-bottom" id="sidebar-scroll-indicator">
                <i class="fas fa-chevron-down"></i>
                <span>More chats below</span>
              </div>
            </div>
          </div>

          <!-- Main chat area -->
          <div class="chat-main d-flex flex-column">
            <div class="chat-main-header d-flex justify-content-between align-items-start">
              <div class="flex-grow-1">
                <h6 class="mb-1 fw-bold" id="chatConversationTitle" style="color: #1e293b;">Select a chat</h6>
                <small class="text-muted d-flex align-items-center gap-1" id="chatConversationSubtitle">
                  <i class="fas fa-shield-alt" style="font-size: 0.7rem;"></i>
                  Secure & private messaging
                </small>
              </div>
              <span class="badge bg-success d-flex align-items-center gap-1 px-2 py-1" style="font-size: 0.75rem;">
                <span class="online-dot"></span> Active
              </span>
            </div>

            <!-- Messages -->
            <div class="chat-messages position-relative" id="chat-messages">
              <!-- Empty state (shown when there are no messages) -->
              <div class="chat-empty-state" id="chat-empty-state">
                <div class="empty-state-icon">
                  <i class="fas fa-comment-dots"></i>
                </div>
                <h6 class="fw-bold mt-3 mb-2" style="color: #475569;">No messages yet</h6>
                <p class="mb-0 text-muted" style="font-size: 0.85rem;">Start the conversation by sending your first message</p>
                <div class="mt-3 d-flex gap-2 justify-content-center flex-wrap">
                  <span class="badge bg-light text-dark border" style="font-size: 0.7rem;">ğŸ‘‹ Say hello</span>
                  <span class="badge bg-light text-dark border" style="font-size: 0.7rem;">ğŸ• Ask about pet</span>
                  <span class="badge bg-light text-dark border" style="font-size: 0.7rem;">ğŸ’° Discuss price</span>
                </div>
              </div>
              <!-- Scroll indicators for messages -->
              <div class="scroll-indicator scroll-indicator-top" id="messages-scroll-top">
                <i class="fas fa-chevron-up"></i>
                <span>Scroll up for older messages</span>
              </div>
              <div class="scroll-indicator scroll-indicator-bottom" id="messages-scroll-bottom">
                <i class="fas fa-chevron-down"></i>
                <span>New messages below</span>
              </div>
            </div>

            <!-- Message input -->
            <form id="chat-form" class="chat-input-area mt-3">
              <div class="chat-input-wrapper">
                <button type="button" class="emoji-btn" onclick="document.getElementById('chat-message-input').value += 'ğŸ¾'">
                  ğŸ¾
                </button>
                <input type="text"
                       id="chat-message-input"
                       class="form-control"
                       placeholder="Type your message here..."
                       autocomplete="off"
                       maxlength="500">
                <button class="btn btn-primary chat-send-btn" type="submit" title="Send message">
                  <i class="fas fa-paper-plane"></i>
                </button>
              </div>
              <div class="chat-input-meta mt-2 d-flex justify-content-between align-items-center">
                <small class="text-muted d-flex align-items-center gap-1">
                  <i class="fas fa-shield-alt" style="color: #10b981;"></i>
                  <span>Private & secure</span>
                </small>
                <small class="text-muted" id="char-count">
                  <i class="fas fa-keyboard me-1"></i>Press Enter to send
                </small>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


